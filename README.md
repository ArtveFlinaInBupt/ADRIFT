# ADRIFT

这是一份北京邮电大学计算机科学与技术专业 2021 级大二下（2022–2023 学年度春季学期）《计算机网络课程设计》课程大作业。

这是一个组队项目，成员是 [fa_555](https://github.com/FA555)、[octopus](https://github.com/OctopusWen)
和 [Adaimu](https://github.com/Adaimu)。

作业题目是实现一个 DNS 中继服务器。强制使用 C 语言完成。

## 说明

- DDL 前二三十个小时赶工出来的，所以粗制滥造。
- 理论上能在 macOS 和 Linux 上运行，但是只在 macOS 上长时间测试过。
- 没好好释放内存，有比较严重的内存泄漏：接管整个系统的 dns 请求正常网上冲浪一两天就上 GB 了的样子。
- `RwLock` 是个写优先的读写锁，手动实现是因为 macOS 上的 pthread 库没有，不过最后应该也没用上。
- `thread/` 看似是个内存池但实际上跑不起来，放在这里是给验收的老师看的。我们发现性能已经非常够用了就没好好搞并发。
- 我们的缓存条目实现得非常烂，没法正确处理一些上游回答中的指针，最后验收被拷打了。
- 在公开此项目之前 macOS 14 Sonoma 发布了，疑似改了一些接口，导致定时器相关的代码在 IDE 里红波浪线，但是仍然能通过编译，我们没有仔细研究具体是什么情况。
- 报告暂不公开。

## 忠告

- 不要臆想实现哪些功能，要仔细研读老师的需求投其所好。搞错了重点既代码白写又拿不到分。
- 比如我们的老师压根没让实现缓存查询，但非常执着于并发处理和黑名单功能；隔壁班的老师则对缓存和 DNS 协议的理解有极高的要求。
